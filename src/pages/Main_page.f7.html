<template>
    
    <!-- Main Screen -->
   
          <div class="page login" id="login" data-name="login">
            <div class="page-content login-screen-content login_bg"  >
              <div class="login-screen-title"> <img src="./static/logo.png" class="img_css"></div>
            
              <div style="margin-top: -3%">
              <div class="row">
                    <div class="col-100" style='text-align: center;'>
                    
                            <div class="custom-label">
                                    <h1>{{ user.community_name }}</h1>
                                </div>
            
            
                                <div class="custom-label" >
                                    <h2 style="color:white">{{ user.area_name }}</h2>
                                </div>
            
                                <div class="custom-label">
                                    <h3 >{{ user.first_name }} {{ user.last_name }}</h3>
                                </div>
                    </div>


                </div>
            </div>
          
<center>
              <div class="main_bot" id="button-part">
              <div class="row" >
                    <!-- Each "cell" has col-[width in percents] class -->
                    <div class="col-33" style='text-align: center;'>
                        
                            <div class="custom-button visitor_btn">
                                <i class="material-icons custom-icon"> directions_car</i>
                            </div>
                            <div class="custom-label">
                                <h3>VISITOR</h3>
                            </div>
                        
                    </div>


                    <div class="col-33"  style='text-align: center;'> 
                        
                            <div class="custom-button entry_btn">
                                <i class="material-icons custom-icon"> transfer_within_a_station</i>
                            </div>
                            <div class="custom-label">
                                <h3>ENTRY</h3>
                            </div>
                        
                    </div>     
                        
                        
                    <div class="col-33" id="scan_module" style='text-align: center;'>
                           
                                <div class="custom-button scan_btn">
                                    <i class="material-icons custom-icon"> center_focus_strong</i>
                                </div>
                                <div class="custom-label">
                                    <h3>SCANNER</h3>
                                </div>
                           
                    </div>
               
                </div>

           
                </div>
                </center>
                <a href="#" class="logout_btn">  <div class="row">
                  <div class="col-100" style='padding:10px;max-height: 6vh; text-align: center;background-color:rgba(255, 255, 255, 0.75);border-radius: 150px;color: #FB6C5E;'>
                              <b>LOGOUT</b>
                      </div>
      
              </div>
            </a>

            </div>

          </div>




      
</template>
<script>
import request from '../js/request.js';
export default {

    data:function(){
      var app=this.$app;
      var auth = app.form.getFormData("auth");
      return{
        user:auth.user,
      }
    },
on:{
pageInit:function(){
  var $$=this.$$;
     var app=this.$app;
     var router=this.$router;

  
     if (app.device.desktop) {
    console.log('It is desktop device');
 
    document.getElementById("scan_module").remove();
  }


//*logout function////////////////////////////////////////////////////////////////////////////////////////////////
$$('.logout_btn').on('click', function () {
console.log("logout");

app.dialog.confirm('Are you want to Logout?', function () {

  app.panel.close();
  router.navigate({name:"login"});
  router.clearPreviousHistory();
  app.form.removeFormData('auth');
      });

});

 // end ///////////////////////////////////////////////////////////////////////////////////////////////////////////////



 

//*visitor function////////////////////////////////////////////////////////////////////////////////////////////////
$$('.visitor_btn').on('click', function () {
console.log("visitor");

  router.navigate({name:"visitor"});

      });



 // end ///////////////////////////////////////////////////////////////////////////////////////////////////////////////


//*entry function////////////////////////////////////////////////////////////////////////////////////////////////
$$('.entry_btn').on('click', function () {
console.log("entry");

  router.navigate({name:"entry"});

      });



 // end ///////////////////////////////////////////////////////////////////////////////////////////////////////////////





//*entry function////////////////////////////////////////////////////////////////////////////////////////////////
$$('.scan_btn').on('click', function () {

  // var QRScanner = window.QRScanner;

  
  router.navigate({name:"scanner"});

  
// function onDone(err, status){
//   if (err) {
//    // here we can handle errors and clean up any loose ends.
//    console.error(err);
//   }
//   if (status.authorized) {
//     // W00t, you have camera access and the scanner is initialized.
//     // QRscanner.show() should feel very fast.
//     console.log("scanner");

//   router.navigate({name:"scanner"});
//   } else if (status.denied) {
//    // The video preview will remain black, and scanning is disabled. We can
//    // try to ask the user to change their mind, but we'll have to send them
//    // to their device settings with `QRScanner.openSettings()`.
//    app.dialog.alert('Permission Denied, Please give permission to use scanner function');

//   } else {
//     // we didn't get permission, but we didn't get permanently denied. (On
//     // Android, a denial isn't permanent unless the user checks the "Don't
//     // ask again" box.) We can ask again at the next relevant opportunity.
//     app.dialog.alert('Please give permission to use scanner function');
//   }
// }


// QRScanner.prepare(onDone); // show the prompt
      });

 // end ///////////////////////////////////////////////////////////////////////////////////////////////////////////////





}

}
 

        
    }
    </script>
